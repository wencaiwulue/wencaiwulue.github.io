# kt-connect

## 支持的特性

- 本地链接到远端集群，在linux和mac上使用sshuttle实现，windows上使用ssh -L实现
- 远端集群访问本地服务，通过使用ssh -R 实现
- 支持exchange模式和mesh方案，实现本地和远端服务共存，通过tag或者header匹配路由
- 支持dns解析

## 局限性

- 对Windows支持的不好。由于在windows上使用ssh -L的方式链接，因此需要配置环境变量才能访问到远端服务。同时，对协议支持的不好，比如无法通过ip直接访问到k8s中的mysql服务
- 远端访问本地，对协议支持的不好。如果在本地开发mq服务，则应该是无法联通的。

exchange模式

```text
┌──────────┐     ┌─ ── ── ──     ┌──────────┐
│ ServiceA ├─┬─►x│ ServiceB │ ┌─►│ ServiceC │
└──────────┘ │    ── ── ── ─┘ │  └──────────┘
         exchange             │
             │   ┌──────────┐ │
             └──►│ ServiceB'├─┘
                 └──────────┘
```

mesh模式

```
┌──────────┐     ┌──────────┐    ┌──────────┐
│ ServiceA ├─┬──►│ ServiceB │─┬─►│ ServiceC │
└──────────┘ │   └──────────┘ │  └──────────┘
            mesh              │
             │   ┌──────────┐ │
             └──►│ ServiceB'├─┘
                 └──────────┘
```
